<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BSC Direct Check - Alternative</title>
    <style>
        body { 
            font-family: Arial, sans-serif; 
            background: #1a1a1a; 
            color: #fff; 
            padding: 20px; 
        }
        .container { 
            max-width: 1000px; 
            margin: 0 auto; 
        }
        .section { 
            background: #2a2a2a; 
            border: 1px solid #444; 
            border-radius: 8px; 
            padding: 20px; 
            margin: 20px 0; 
        }
        button { 
            background: #007bff; 
            color: white; 
            border: none; 
            padding: 10px 20px; 
            border-radius: 5px; 
            cursor: pointer; 
            margin: 5px; 
        }
        button:hover { background: #0056b3; }
        .result { 
            background: #1e1e1e; 
            border: 1px solid #555; 
            border-radius: 5px; 
            padding: 15px; 
            margin: 10px 0; 
            font-family: monospace;
            white-space: pre-wrap; 
        }
        .success { color: #28a745; }
        .error { color: #dc3545; }
        .warning { color: #ffc107; }
        .info { color: #17a2b8; }
        input { 
            background: #333; 
            color: white; 
            border: 1px solid #555; 
            padding: 8px; 
            border-radius: 4px; 
            width: 100%; 
            margin: 5px 0; 
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üîß –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ BSC —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π</h1>
        
        <div class="section">
            <h3>üí° –ë—ã—Å—Ç—Ä—ã–π —Ç–µ—Å—Ç –ø–ª–∞—Ç–µ–∂–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã</h3>
            <button onclick="quickTest()">üöÄ –ë—ã—Å—Ç—Ä—ã–π —Ç–µ—Å—Ç —Å —Å–∏–º—É–ª—è—Ü–∏–µ–π</button>
            <button onclick="testWebhook()">üîî –¢–µ—Å—Ç Webhook –ø–æ–¥—Ö–æ–¥–∞</button>
            <button onclick="testUniqueAddress()">üéØ –¢–µ—Å—Ç —É–Ω–∏–∫–∞–ª—å–Ω–æ–≥–æ –∞–¥—Ä–µ—Å–∞</button>
        </div>

        <div class="section">
            <h3>üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ –±–∞–ª–∞–Ω—Å–∞ —á–µ—Ä–µ–∑ Web3</h3>
            <input type="text" id="checkAddress" value="0x0476d0b67e7e7e2654F16b31F807868FAf726588" placeholder="BSC Address">
            <button onclick="checkBalance()">üí∞ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –±–∞–ª–∞–Ω—Å</button>
            <button onclick="checkLatestBlock()">üì¶ –ü–æ—Å–ª–µ–¥–Ω–∏–π –±–ª–æ–∫ BSC</button>
        </div>

        <div class="section">
            <h3>üìä –†–µ–∑—É–ª—å—Ç–∞—Ç—ã</h3>
            <div id="results" class="result">–ì–æ—Ç–æ–≤ –∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é...</div>
        </div>
    </div>

    <script>
        const results = document.getElementById('results');
        const BSC_RPC = 'https://bsc-dataseed.binance.org/';
        
        function log(message, type = 'info') {
            const timestamp = new Date().toLocaleTimeString();
            const colors = { success: '#28a745', error: '#dc3545', warning: '#ffc107', info: '#17a2b8' };
            results.innerHTML += `<span style="color: ${colors[type]}">[${timestamp}] ${message}</span>\n`;
            results.scrollTop = results.scrollHeight;
        }
        
        function clearLog() {
            results.innerHTML = '';
        }
        
        // –ë—ã—Å—Ç—Ä—ã–π —Ç–µ—Å—Ç —Å–∏–º—É–ª—è—Ü–∏–∏
        async function quickTest() {
            clearLog();
            log('üöÄ –ó–∞–ø—É—Å–∫–∞–µ–º –±—ã—Å—Ç—Ä—ã–π —Ç–µ—Å—Ç –ø–ª–∞—Ç–µ–∂–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã...', 'info');
            
            // –°–∏–º—É–ª–∏—Ä—É–µ–º —Å–æ–∑–¥–∞–Ω–∏–µ –ø–ª–∞—Ç–µ–∂–∞
            log('üìù –°–æ–∑–¥–∞–µ–º —Ç–µ—Å—Ç–æ–≤—ã–π –ø–ª–∞—Ç–µ–∂...', 'info');
            
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
            try {
                const response = await fetch('/');
                if (response.ok) {
                    log('‚úÖ –û—Å–Ω–æ–≤–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–Ω–æ', 'success');
                    log('', 'info');
                    log('üìã –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –¥–ª—è —Ç–µ—Å—Ç–∞:', 'warning');
                    log('1. –û—Ç–∫—Ä–æ–π—Ç–µ http://localhost:3000 –≤ –Ω–æ–≤–æ–π –≤–∫–ª–∞–¥–∫–µ', 'info');
                    log('2. –û—Ç–∫—Ä–æ–π—Ç–µ –∫–æ–Ω—Å–æ–ª—å (F12)', 'info');
                    log('3. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:', 'info');
                    log('', 'info');
                    log('// –°–æ–∑–¥–∞—Ç—å –ø–ª–∞—Ç–µ–∂ –∏ —Å—Ä–∞–∑—É –ø–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å', 'success');
                    log('walletPoolManager.createPayment("test-boost", 0.0005, "BNB")', 'success');
                    log('setTimeout(() => manualConfirmPayment(), 2000)', 'success');
                    log('', 'info');
                    log('‚úÖ –≠—Ç–æ –∞–∫—Ç–∏–≤–∏—Ä—É–µ—Ç Test Boost –±–µ–∑ —Ä–µ–∞–ª—å–Ω–æ–π –æ–ø–ª–∞—Ç—ã!', 'success');
                } else {
                    log('‚ùå –û—Å–Ω–æ–≤–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ', 'error');
                }
            } catch (error) {
                log(`‚ùå –û—à–∏–±–∫–∞: ${error.message}`, 'error');
            }
        }
        
        // –¢–µ—Å—Ç Webhook –ø–æ–¥—Ö–æ–¥–∞
        function testWebhook() {
            clearLog();
            log('üîî Webhook –ø–æ–¥—Ö–æ–¥ –¥–ª—è –ø–ª–∞—Ç–µ–∂–µ–π', 'info');
            log('', 'info');
            log('üí° –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ: –ü–ª–∞—Ç–µ–∂–Ω—ã–µ –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã —Å Webhook', 'warning');
            log('', 'info');
            log('‚úÖ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:', 'success');
            log('  - –ú–≥–Ω–æ–≤–µ–Ω–Ω—ã–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –ø–ª–∞—Ç–µ–∂–∞—Ö', 'info');
            log('  - –ù–µ –Ω—É–∂–µ–Ω API –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏', 'info');
            log('  - –í—ã—Å–æ–∫–∞—è –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç—å', 'info');
            log('', 'info');
            log('üéØ –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ —Å–µ—Ä–≤–∏—Å—ã:', 'warning');
            log('  1. CoinPayments - –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç BNB –∏ webhook', 'info');
            log('  2. NOWPayments - –ø—Ä–æ—Å—Ç–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è', 'info');
            log('  3. CoinGate - –ø–æ–ø—É–ª—è—Ä–Ω—ã–π –≤—ã–±–æ—Ä', 'info');
            log('  4. Binance Pay - –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π –æ—Ç Binance', 'info');
            log('', 'info');
            log('üìù –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:', 'info');
            log('  1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–ª–∞—Ç–∏—Ç —á–µ—Ä–µ–∑ —Ñ–æ—Ä–º—É –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞', 'info');
            log('  2. –ü—Ä–æ–≤–∞–π–¥–µ—Ä –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç webhook –Ω–∞ –≤–∞—à —Å–µ—Ä–≤–µ—Ä', 'info');
            log('  3. –°–µ—Ä–≤–µ—Ä –∞–∫—Ç–∏–≤–∏—Ä—É–µ—Ç –ø—Ä–æ–¥—É–∫—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏', 'info');
        }
        
        // –¢–µ—Å—Ç —É–Ω–∏–∫–∞–ª—å–Ω–æ–≥–æ –∞–¥—Ä–µ—Å–∞
        function testUniqueAddress() {
            clearLog();
            log('üéØ –ü–æ–¥—Ö–æ–¥ —Å —É–Ω–∏–∫–∞–ª—å–Ω—ã–º–∏ –∞–¥—Ä–µ—Å–∞–º–∏', 'info');
            log('', 'info');
            log('üí° –†–µ—à–µ–Ω–∏–µ: HD Wallet (Hierarchical Deterministic)', 'warning');
            log('', 'info');
            log('üìã –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:', 'info');
            log('  1. –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –∞–¥—Ä–µ—Å –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –ø–ª–∞—Ç–µ–∂–∞', 'info');
            log('  2. –ú–æ–Ω–∏—Ç–æ—Ä–∏–º —Ç–æ–ª—å–∫–æ —ç—Ç–æ—Ç –∞–¥—Ä–µ—Å', 'info');
            log('  3. –õ—é–±–∞—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è = —É—Å–ø–µ—à–Ω—ã–π –ø–ª–∞—Ç–µ–∂', 'info');
            log('', 'info');
            log('‚úÖ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:', 'success');
            log('  - –ù–µ –Ω—É–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä—è—Ç—å —Å—É–º–º—É', 'info');
            log('  - –ù–µ—Ç –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤ –º–µ–∂–¥—É –ø–ª–∞—Ç–µ–∂–∞–º–∏', 'info');
            log('  - –ü—Ä–æ—Å—Ç–∞—è –ª–æ–≥–∏–∫–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏', 'info');
            log('', 'info');
            log('üîß –†–µ–∞–ª–∏–∑–∞—Ü–∏—è:', 'warning');
            log('  const { HDNode } = require("ethers")', 'info');
            log('  const masterKey = "–≤–∞—à –º–∞—Å—Ç–µ—Ä –∫–ª—é—á"', 'info');
            log('  const wallet = HDNode.fromMnemonic(masterKey)', 'info');
            log('  const newAddress = wallet.derivePath(`m/44\'/60\'/0\'/0/${index}`)', 'info');
        }
        
        // –ü—Ä–æ–≤–µ—Ä–∫–∞ –±–∞–ª–∞–Ω—Å–∞ —á–µ—Ä–µ–∑ RPC
        async function checkBalance() {
            const address = document.getElementById('checkAddress').value;
            log(`üí∞ –ü—Ä–æ–≤–µ—Ä—è–µ–º –±–∞–ª–∞–Ω—Å ${address}...`, 'info');
            
            try {
                const response = await fetch(BSC_RPC, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        jsonrpc: '2.0',
                        method: 'eth_getBalance',
                        params: [address, 'latest'],
                        id: 1
                    })
                });
                
                const data = await response.json();
                if (data.result) {
                    const balanceWei = parseInt(data.result, 16);
                    const balanceBNB = balanceWei / 1e18;
                    log(`‚úÖ –ë–∞–ª–∞–Ω—Å: ${balanceBNB.toFixed(6)} BNB`, 'success');
                } else {
                    log(`‚ùå –û—à–∏–±–∫–∞: ${data.error?.message || 'Unknown error'}`, 'error');
                }
            } catch (error) {
                log(`‚ùå –û—à–∏–±–∫–∞ RPC: ${error.message}`, 'error');
            }
        }
        
        // –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –±–ª–æ–∫–∞
        async function checkLatestBlock() {
            log(`üì¶ –ü—Ä–æ–≤–µ—Ä—è–µ–º –ø–æ—Å–ª–µ–¥–Ω–∏–π –±–ª–æ–∫ BSC...`, 'info');
            
            try {
                const response = await fetch(BSC_RPC, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        jsonrpc: '2.0',
                        method: 'eth_blockNumber',
                        params: [],
                        id: 1
                    })
                });
                
                const data = await response.json();
                if (data.result) {
                    const blockNumber = parseInt(data.result, 16);
                    log(`‚úÖ –ü–æ—Å–ª–µ–¥–Ω–∏–π –±–ª–æ–∫: #${blockNumber}`, 'success');
                    log(`üìä BSC RPC —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ!`, 'success');
                } else {
                    log(`‚ùå –û—à–∏–±–∫–∞: ${data.error?.message || 'Unknown error'}`, 'error');
                }
            } catch (error) {
                log(`‚ùå –û—à–∏–±–∫–∞ RPC: ${error.message}`, 'error');
            }
        }
    </script>
</body>
</html> 